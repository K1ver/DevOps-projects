# Basic CI/CD

## Contents

1. [Настройка gitlab-runner](#part-1-настройка-gitlab-runner)  
2. [Сборка](#part-2-сборка)  
3. [Тест кодстайла](#part-3-тест-кодстайла)   
4. [Интеграционные тесты](#part-4-интеграционные-тесты)  
5. [Этап деплоя](#part-5-этап-деплоя)  
6. [Дополнительно. Уведомления](#part-6-дополнительно-уведомления)

### Part 1. Настройка **gitlab-runner**

**== Выполнение ==**

##### Подними виртуальную машину *Ubuntu Server 22.04 LTS*.

![alt](Images/Screenshot_3.png)

##### Скачай и установи на виртуальную машину **gitlab-runner**.

![alt](Images/Screenshot_1.png)

##### Запусти **gitlab-runner** и зарегистрируй его для использования в текущем проекте (*DO6_CICD*).

![alt](Images/Screenshot_2.png)

### Part 2. Сборка

**== Выполнение ==**

##### В файле _gitlab-ci.yml_ добавь этап запуска сборки через мейк файл из проекта _C2_. Файлы, полученные после сборки (артефакты), сохрани в произвольную директорию со сроком хранения 30 дней.

![alt text](Images/Screenshot_4.png)

### Part 3. Тест кодстайла

**== Задание ==**

#### Напиши этап для **CI**, который запускает скрипт кодстайла (*clang-format*).

![alt text](Images/Screenshot_7.png)

- Если есть ошибка в стиле кода

![alt text](Images/Screenshot_5.png)

- Если её нету

![alt text](Images/Screenshot_6.png)

### Part 4. Интеграционные тесты

**== Задание ==**

#### Напиши этап для **CI**, который запускает твои интеграционные тесты из того же проекта.

![alt text](Images/Screenshot_8.png)

##### Если тесты не прошли, то «зафейли» пайплайн.

##### В пайплайне отобрази вывод, что интеграционные тесты успешно прошли / провалились.

![  ](Images/Screenshot_9.png)

### Part 5. Этап деплоя

`-` Для завершения этого задания ты должен перенести исполняемые файлы на другую виртуальную машину, которая будет играть роль продакшна. Удачи.

**== Задание ==**

- Соединям две машины

![alt text](Images/Screenshot_11.png)

- Прописываем баш скрипт

![alt text](Images/Screenshot_12.png)

- Прописываем стадию деплоя

![alt text](Images/Screenshot_13.png)

- Проверяем что всё работает

![alt text](Images/Screenshot_10.png)

### Part 6. Дополнительно. Уведомления

**== Задание ==**

##### Настрой уведомления о успешном/неуспешном выполнении пайплайна через бота с именем «[твой nickname] DO6 CI/CD» в *Telegram*.

- Текст уведомления должен содержать информацию об успешности прохождения как этапа **CI**, так и этапа **CD**.
- В остальном текст уведомления может быть произвольным.
